---
description:
globs:
alwaysApply: false
---
-- WARNING: This schema is for context only and is not meant to be run.
-- Table order and constraints may not be valid for execution.

CREATE TABLE public.detection_history (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  user_id uuid,
  firebase_uid text,
  created_at timestamp with time zone DEFAULT now(),
  detection_type text NOT NULL,
  input_data text,
  detected_foods text,
  recipe_suggestion text,
  recipe_instructions text,
  recipe_ingredients text,
  analysis_id text,
  youtube_link text,
  google_link text,
  resources_link text,
  CONSTRAINT detection_history_pkey PRIMARY KEY (id),
  CONSTRAINT detection_history_user_id_fkey FOREIGN KEY (user_id) REFERENCES auth.users(id)
);
CREATE TABLE public.feedback (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  user_id uuid,
  feedback_text text NOT NULL,
  created_at timestamp with time zone DEFAULT now(),
  CONSTRAINT feedback_pkey PRIMARY KEY (id),
  CONSTRAINT feedback_user_id_fkey FOREIGN KEY (user_id) REFERENCES auth.users(id)
);
CREATE TABLE public.meal_plans (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  user_id uuid NOT NULL,
  plan_data jsonb NOT NULL,
  created_at timestamp with time zone DEFAULT now(),
  CONSTRAINT meal_plans_pkey PRIMARY KEY (id),
  CONSTRAINT meal_plans_user_id_fkey FOREIGN KEY (user_id) REFERENCES auth.users(id)
);
CREATE TABLE public.profiles (
  id uuid NOT NULL,
  firebase_uid text UNIQUE,
  email text UNIQUE,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  CONSTRAINT profiles_pkey PRIMARY KEY (id),
  CONSTRAINT profiles_id_fkey FOREIGN KEY (id) REFERENCES auth.users(id)
);
CREATE TABLE public.shared_recipes (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  created_at timestamp with time zone DEFAULT now(),
  recipe_type text NOT NULL,
  suggestion text,
  instructions text,
  ingredients text,
  detected_foods text,
  analysis_id text,
  youtube text,
  google text,
  resources text,
  CONSTRAINT shared_recipes_pkey PRIMARY KEY (id)
);
CREATE TABLE public.user_sessions (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  user_id uuid,
  login_at timestamp with time zone DEFAULT now(),
  logout_at timestamp with time zone,
  device_info text,
  ip_address text,
  CONSTRAINT user_sessions_pkey PRIMARY KEY (id),
  CONSTRAINT user_sessions_user_id_fkey FOREIGN KEY (user_id) REFERENCES auth.users(id)
);